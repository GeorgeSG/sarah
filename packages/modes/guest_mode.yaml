input_boolean:
  guest_mode:
    name: Guest mode
    initial: off
    icon: mdi:human-greeting

automation:
  - id: enable_guest_mode
    alias: Guest mode · Enable
    trigger:
      platform: state
      entity_id: input_boolean.guest_mode
      from: "off"
      to: "on"
    action:
      - service: automation.turn_off
        entity_id:
          - automation.leaving_home
          - automation.coming_home
      - service: input_boolean.turn_off
        entity_id: input_boolean.speech_notifications

  - id: disable_guest_mode
    alias: Guest mode · Disable
    trigger:
      platform: state
      entity_id: input_boolean.guest_mode
      from: "on"
      to: "off"
    action:
      - service: automation.turn_on
        entity_id:
          - automation.leaving_home
          - automation.coming_home
      - service: input_boolean.turn_on
        entity_id: input_boolean.speech_notifications

  - id: telegram_enable_guest_mode
    alias: Guest mode · Enable · From Telegram
    trigger:
      platform: event
      event_type: telegram_command
      event_data:
        command: "/guest_mode_on"
    action:
      - service: input_boolean.turn_on
        entity_id: input_boolean.guest_mode
      - service: notify.telegram
        data:
          title: "⚙️ *System Module*"
          message: "Okay, turning Guest mode on!"

  - id: telegram_disable_guest_mode
    alias: Guest mode · Disable · From Telegram
    trigger:
      platform: event
      event_type: telegram_command
      event_data:
        command: "/guest_mode_off"
    action:
      - service: input_boolean.turn_off
        entity_id: input_boolean.guest_mode
      - service: notify.telegram
        data:
          title: "⚙️ *System Module*"
          message: "Okay, turning Guest mode off!"
