- type: custom:mod-card
  style:
    layout-card:
      $:
        .: |
          #columns {
            padding: 0 10px;
          }
          #columns .column {
            padding: 10px 10px;
          }
  card:
    type: custom:layout-card
    layout: horizontal
    max_columns: 1
    cards:
      - type: vertical-stack
        title: Lights
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                template: default
                entity: light.tuya_kitchen_all_lights
                name: Kitchen
              - type: custom:button-card
                template: default
                entity: light.tuya_kitchen_main_lights
                name: Main
              - type: custom:button-card
                template: default
                entity: light.tuya_kitchen_secondary_lights
                name: Secondary
              - type: vertical-stack
                cards:
                  - type: custom:button-card
                    template: half
                    entity: light.hallway_entrance_lights
                    name: Entrance
                  - type: custom:button-card
                    template: half
                    entity: light.tuya_hallway_main_lights
                    name: Hallway
                    styles:
                      card:
                        - height: 46px

      - type: horizontal-stack
        title: Brita
        cards:
          - type: custom:button-card
            template: default
            name: Pour water
            entity: script.brita_pour_water
            custom_fields:
              remaining_liters: "[[[ return states['input_number.brita_remaining_liters'].state ]]]"
            tap_action:
              action: toggle
            styles:
              card:
                - background: >
                    [[[
                      var remaining = states['input_number.brita_remaining_liters'].state;
                      var percent = 100 - (remaining / 150 * 100);
                      return 'linear-gradient(180deg, var(--paper-card-background-color) 0%, var(--paper-card-background-color)' + percent + '%, var(--primary-color) ' + percent + '%)'
                    ]]]
                - color: white
              icon:
                - color: white
              custom_fields:
                remaining_liters:
                  - position: absolute
                  - top: 5px
                  - right: 5px
                  - font-size: 12px
          - type: custom:button-card
            template: default
            name: New filter
            entity: script.brita_new_filter
            tap_action:
              action: toggle
          - type: custom:button-card
            template: default
            name: Filter
            entity: binary_sensor.brita_should_change_filter

      - type: vertical-stack
        cards:
          - type: vertical-stack
            title: Media
            cards:
              - type: custom:decluttering-card
                template: sonos_media_player
                variables:
                  - player: media_player.kitchen
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    template: xs
                    entity: sensor.philip_defranco
                    name: Latest PDS
                    tap_action:
                      action: call-service
                      service: script.youtube_play_latest_pds
                  - type: custom:button-card
                    template: xs
                    entity: script.music_play
                    name: Chill
                    icon: mdi:music
                    tap_action:
                      action: toggle
                  - type: custom:button-card
                    template: xs
                    entity: script.music_play
                    name: Retro
                    icon: mdi:music
                    tap_action:
                      action: call-service
                      service: script.music_play
                      service_data:
                        playlist: "Retro"
                  - type: custom:button-card
                    template: xs
                    entity: script.sonos_join_bedroom
                    name: Bedroom
                    icon: mdi:speaker-multiple
                    tap_action:
                      action: toggle
                  - type: custom:button-card
                    template:
                      - xs
                      - with_state_background
                    entity: script.sonos_join_tv
                    icon: mdi:speaker-multiple
                    name: TV
                    tap_action:
                      action: toggle

      - type: horizontal-stack
        cards:
          - type: custom:button-card
            template:
              - xs
              - with_state_background
            entity: binary_sensor.browser_kitchen
            name: Motion
          - type: custom:button-card
            template:
              - xs
              - with_state_background
            entity: binary_sensor.motion_1_ias_zone
            name: Motion 2
          - type: custom:button-card
            template:
              - xs
              - with_state_background
            entity: binary_sensor.motion_2_ias_zone
            name: Hallway
          - type: custom:button-card
            template:
              - xs
              - with_state_background
            entity: media_player.nvidia_shield
            name: Shield
          - type: custom:button-card
            template:
              - xs
              - with_state_background
            entity: switch.titanium_power
