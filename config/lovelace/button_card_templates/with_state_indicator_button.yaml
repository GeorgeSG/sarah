with_state_indicator:
  variables:
    state_indicator_id:
    state_indicator_size: 3px
    state_indicator_on_color: white
    state_indicator_off_color: transparent
  triggers_update: all # unfortunately a template doesn't seem to work here :/
  double_tap_action:
    action: call-service
    service: "[[[ return variables.state_indicator_id.split('.')[0] + '.toggle' ]]]"
    service_data:
      entity_id: "[[[ return variables.state_indicator_id ]]]"
  styles:
    card:
      - border-bottom: >-
          [[[
            const color = states[variables.state_indicator_id].state === 'on'
                ? variables.state_indicator_on_color
                : variables.state_indicator_off_color;

            return variables.state_indicator_size + ' solid ' + color;
          ]]]
