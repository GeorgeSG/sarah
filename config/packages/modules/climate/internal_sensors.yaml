sensor:
  - platform: min_max
    type: mean
    name: Average temperature
    entity_ids:
      - sensor.trisensor_temperature
      - sensor.bedroom_weather_temperature
      - sensor.kitchen_weather_temperature
      - sensor.hallway_weather_temperature
      - sensor.guest_bedroom_weather_temperature

  - platform: min_max
    type: mean
    name: Average humidity
    entity_ids:
      - sensor.multisensor_6_relative_humidity
      - sensor.bedroom_weather_humidity
      - sensor.kitchen_weather_humidity
      - sensor.hallway_weather_humidity
      - sensor.guest_bedroom_weather_humidity

mqtt:
  sensor:
    # Bedroom weather sensor
    - name: "Bedroom weather temperature"
      state_topic: "z2m_deconz/bedroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "°C"
      device_class: "temperature"
      value_template: "{{ value_json.temperature }}"
    - name: "Bedroom weather humidity"
      state_topic: "z2m_deconz/bedroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "humidity"
      value_template: "{{ value_json.humidity }}"
    - name: "Bedroom weather pressure"
      state_topic: "z2m_deconz/bedroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "hPa"
      device_class: "pressure"
      value_template: "{{ value_json.pressure }}"
    - name: "Bedroom weather battery"
      state_topic: "z2m_deconz/bedroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "battery"
      value_template: "{{ value_json.battery }}"
    - name: "Bedroom weather LQI"
      state_topic: "z2m_deconz/bedroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "lqi"
      device_class: "signal_strength"
      value_template: "{{ value_json.linkquality }}"

    # Kitchen weather sensor
    - name: "Kitchen weather temperature"
      state_topic: "z2m_deconz/kitchen_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "°C"
      device_class: "temperature"
      value_template: "{{ value_json.temperature }}"
    - name: "Kitchen weather humidity"
      state_topic: "z2m_deconz/kitchen_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "humidity"
      value_template: "{{ value_json.humidity }}"
    - name: "Kitchen weather pressure"
      state_topic: "z2m_deconz/kitchen_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "hPa"
      device_class: "pressure"
      value_template: "{{ value_json.pressure }}"
    - name: "Kitchen weather battery"
      state_topic: "z2m_deconz/kitchen_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "battery"
      value_template: "{{ value_json.battery }}"
    - name: "Kitchen weather LQI"
      state_topic: "z2m_deconz/kitchen_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "lqi"
      device_class: "signal_strength"
      value_template: "{{ value_json.linkquality }}"

    # Bathroom weather sensor
    - name: "Bathroom weather temperature"
      state_topic: "z2m_deconz/bathroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "°C"
      device_class: "temperature"
      value_template: "{{ value_json.temperature }}"
    - name: "Bathroom weather humidity"
      state_topic: "z2m_deconz/bathroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "humidity"
      value_template: "{{ value_json.humidity }}"
    - name: "Bathroom weather pressure"
      state_topic: "z2m_deconz/bathroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "hPa"
      device_class: "pressure"
      value_template: "{{ value_json.pressure }}"
    - name: "Bathroom weather battery"
      state_topic: "z2m_deconz/bathroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "battery"
      value_template: "{{ value_json.battery }}"
    - name: "Bathroom weather LQI"
      state_topic: "z2m_deconz/bathroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "lqi"
      device_class: "signal_strength"
      value_template: "{{ value_json.linkquality }}"

    # Hallway weather sensor
    - name: "Hallway weather temperature"
      state_topic: "z2m_deconz/hallway_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "°C"
      device_class: "temperature"
      value_template: "{{ value_json.temperature }}"
    - name: "Hallway weather humidity"
      state_topic: "z2m_deconz/hallway_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "humidity"
      value_template: "{{ value_json.humidity }}"
    - name: "Hallway weather pressure"
      state_topic: "z2m_deconz/hallway_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "hPa"
      device_class: "pressure"
      value_template: "{{ value_json.pressure }}"
    - name: "Hallway weather battery"
      state_topic: "z2m_deconz/hallway_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "battery"
      value_template: "{{ value_json.battery }}"
    - name: "Hallway weather LQI"
      state_topic: "z2m_deconz/hallway_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "lqi"
      device_class: "signal_strength"
      value_template: "{{ value_json.linkquality }}"

    # Guest bedroom weather sensor
    - name: "Guest bedroom weather temperature"
      state_topic: "z2m_deconz/guest_bedroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "°C"
      device_class: "temperature"
      value_template: "{{ value_json.temperature }}"
    - name: "Guest bedroom weather humidity"
      state_topic: "z2m_deconz/guest_bedroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "humidity"
      value_template: "{{ value_json.humidity }}"
    - name: "Guest bedroom weather pressure"
      state_topic: "z2m_deconz/guest_bedroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "hPa"
      device_class: "pressure"
      value_template: "{{ value_json.pressure }}"
    - name: "Guest bedroom weather battery"
      state_topic: "z2m_deconz/guest_bedroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "battery"
      value_template: "{{ value_json.battery }}"
    - name: "Guest bedroom weather LQI"
      state_topic: "z2m_deconz/guest_bedroom_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "lqi"
      device_class: "signal_strength"
      value_template: "{{ value_json.linkquality }}"

    # Terrarium weather sensor
    - name: "Terrarium weather temperature"
      state_topic: "z2m_deconz/terrarium_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "°C"
      device_class: "temperature"
      value_template: "{{ value_json.temperature }}"
    - name: "Terrarium weather humidity"
      state_topic: "z2m_deconz/terrarium_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "humidity"
      value_template: "{{ value_json.humidity }}"
    - name: "Terrarium weather pressure"
      state_topic: "z2m_deconz/terrarium_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "hPa"
      device_class: "pressure"
      value_template: "{{ value_json.pressure }}"
    - name: "Terrarium weather battery"
      state_topic: "z2m_deconz/terrarium_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "battery"
      value_template: "{{ value_json.battery }}"
    - name: "Terrarium weather LQI"
      state_topic: "z2m_deconz/terrarium_weather"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "lqi"
      device_class: "signal_strength"
      value_template: "{{ value_json.linkquality }}"

    # Terrarium weather sensor
    - name: "Aqara TVOC temperature"
      state_topic: "z2m_deconz/aqara_tvoc"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "°C"
      device_class: "temperature"
      value_template: "{{ value_json.temperature }}"
    - name: "Aqara TVOC humidity"
      state_topic: "z2m_deconz/aqara_tvoc"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "humidity"
      value_template: "{{ value_json.humidity }}"
    - name: "Aqara TVOC voc"
      state_topic: "z2m_deconz/aqara_tvoc"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "ppb"
      device_class: "volatile_organic_compounds"
      value_template: "{{ value_json.voc }}"
    - name: "Aqara TVOC battery"
      state_topic: "z2m_deconz/aqara_tvoc"
      availability_topic: "z2m_deconz/bridge/state"
      unit_of_measurement: "%"
      device_class: "battery"
      value_template: "{{ value_json.battery }}"
    - name: "Aqara TVOC LQI"
      state_topic: "z2m_deconz/aqara_tvoc"
      availability_topic: "z2m_deconz/bridge/state"
      device_class: "signal_strength"
      unit_of_measurement: "lqi"
      value_template: "{{ value_json.linkquality }}"
