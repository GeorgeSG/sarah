light:
  - platform: "mqtt"
    name: "Hallway main"
    state_topic: "z2m_deconz/light_hallway_main"
    availability_topic: "z2m_deconz/bridge/state"
    brightness: true
    color_temp: true
    xy: false
    hs: false
    schema: "json"
    command_topic: "z2m_deconz/light_hallway_main/set"
    brightness_scale: 254
    max_mireds: 500
    min_mireds: 150

  - platform: "mqtt"
    name: "Hallway entrance"
    state_topic: "z2m_deconz/light_hallway_entrance"
    availability_topic: "z2m_deconz/bridge/state"
    brightness: true
    color_temp: false
    xy: false
    hs: false
    schema: "json"
    command_topic: "z2m_deconz/light_hallway_entrance/set"
    brightness_scale: 254

  - platform: "mqtt"
    name: "Kitchen main"
    state_topic: "z2m_deconz/light_kitchen_main"
    availability_topic: "z2m_deconz/bridge/state"
    brightness: true
    color_temp: true
    xy: false
    hs: false
    schema: "json"
    command_topic: "z2m_deconz/light_kitchen_main/set"
    brightness_scale: 254
    max_mireds: 500
    min_mireds: 150
    effect: true
    effect_list:
      - "blink"
      - "breathe"
      - "okay"
      - "channel_change"
      - "finish_effect"

  - platform: "mqtt"
    name: "Kitchen secondary"
    state_topic: "z2m_deconz/light_kitchen_secondary"
    availability_topic: "z2m_deconz/bridge/state"
    brightness: true
    color_temp: true
    xy: false
    hs: false
    schema: "json"
    command_topic: "z2m_deconz/light_kitchen_secondary/set"
    brightness_scale: 254
    max_mireds: 500
    min_mireds: 150
    effect: true
    effect_list:
      - "blink"
      - "breathe"
      - "okay"
      - "channel_change"
      - "finish_effect"

  - platform: group
    name: Living room main
    entities:
      - light.light_le_1
      - light.light_le_2
      - light.light_le_3
      - light.light_le_4

  - platform: group
    name: Living room ceiling
    entities:
      - light.living_room_main
      - light.pc

  - platform: group
    name: Living room ambient
    entities:
      - light.living_room_ambient_main
      - light.light_lohas_2

  - platform: group
    name: Living room
    entities:
      - light.living_room_ceiling
      - light.living_room_ambient

  - platform: group
    name: Master bedroom main
    entities:
      - light.hue_2
      - light.hue_3
      - light.hue_4
      - light.hue_5

  - platform: group
    name: Master bedroom
    entities:
      - light.master_bedroom_main
      - light.bedside
      - light.bed_led

  - platform: group
    name: Kitchen
    entities:
      - light.kitchen_main
      - light.kitchen_secondary

  - platform: group
    name: Hallway
    entities:
      - light.hallway_entrance
      - light.hallway_main

  - platform: group
    name: On after dark
    entities:
      - light.living_room
      - light.master_bedroom
      - light.hallway
      - light.light_lohas_6

  - platform: group
    name: Ceiling
    entities:
      - light.living_room_main
      - light.pc
      - light.master_bedroom_main
      - light.kitchen
      - light.hallway

  - platform: group
    name: All
    entities:
      - light.living_room
      - light.master_bedroom
      - light.kitchen
      - light.hallway
      - light.light_lohas_6

automation:
  - alias: Lighting 路 Sync Kitchen Main states
    trigger:
      platform: state
      entity_id: light.kitchen_main
    action:
      - delay: "00:00:03"
      - service: mqtt.publish
        data:
          topic: "z2m_deconz/neo_1/get"
          payload: ""
      - service: mqtt.publish
        data:
          topic: "z2m_deconz/neo_2/get"
          payload: ""
      - service: mqtt.publish
        data:
          topic: "z2m_deconz/hue_ambiance_6/get"
          payload: ""

  - alias: Lighting 路 Sync Kitchen Secondary states
    trigger:
      platform: state
      entity_id: light.kitchen_secondary
    action:
      - delay: "00:00:03"
      - service: mqtt.publish
        data:
          topic: "z2m_deconz/hue_ambiance_1/get"
          payload: ""
      - service: mqtt.publish
        data:
          topic: "z2m_deconz/hue_ambiance_2/get"
          payload: ""
      - service: mqtt.publish
        data:
          topic: "z2m_deconz/hue_ambiance_3/get"
          payload: ""
      - service: mqtt.publish
        data:
          topic: "z2m_deconz/hue_ambiance_4/get"
          payload: ""

  - alias: Lighting 路 Sync Hallway Main states
    trigger:
      platform: state
      entity_id: light.hallway_main
    action:
      - delay: "00:00:03"
      - service: mqtt.publish
        data:
          topic: "z2m_deconz/hue_ambiance_5/get"
          payload: ""
      - service: mqtt.publish
        data:
          topic: "z2m_deconz/hue_1/get"
          payload: ""

  - alias: Lighting 路 Sync Hallway Entrance states
    trigger:
      platform: state
      entity_id: light.hallway_main
    action:
      - delay: "00:00:03"
      - service: mqtt.publish
        data:
          topic: "z2m_deconz/hue_white_1/get"
          payload: ""
      - service: mqtt.publish
        data:
          topic: "z2m_deconz/hue_white_2/get"
          payload: ""


homeassistant:
  customize:
    light.ceiling:
      icon: mdi:ceiling-light

    # Living room
    light.living_room:
      icon: mdi:lightbulb-group
    light.living_room_ceiling:
      icon: mdi:ceiling-light

    light.living_room_main:
      icon: bha:ceiling-spot-lamp

    light.pc:
      friendly_name: PC
      icon: bha:outdoor-lamp-variant

    light.living_room_ambient:
      icon: mdi:floor-lamp-dual
    light.light_lohas_2:
      friendly_name: Living room ambient secondary

    # Master bedroom
    light.master_bedroom:
      friendly_name: Bedroom
      icon: mdi:lightbulb-group

    light.master_bedroom_main:
      friendly_name: Bedroom main
      icon: bha:ceiling-spot-lamp

    light.bedside:
      icon: mdi:desk-lamp

    # Kitchen
    light.kitchen_main:
      icon: bha:ceiling-spot-lamp
    light.kitchen_secondary:
      icon: bha:ceiling-spot-lamp

    # Hallway
    light.hallway:
      icon: mdi:lightbulb-group

    light.hallway_entrance:
      icon: bha:ceiling-spot-lamp

    light.hallway_main:
      icon: bha:ceiling-spot-lamp

    # Guest Bedroom
    light.light_lohas_6:
      icon: bha:table-lamp-variant
